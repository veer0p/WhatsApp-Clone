<div class="chat-window">
  <!-- Chat Header -->
  <div class="chat-header">
    <div class="profile-info">
      <img
        src="https://www.w3schools.com/w3images/avatar2.png"
        alt="Avatar"
        class="avatar" />
      <div class="profile-details">
        <h2>{{ title }}</h2>
        <span class="status">{{ status }}</span>
      </div>
    </div>

    <div class="search-container">
      <button class="icon-button search-button" (click)="toggleSearch()">
        <i class="fa fa-search"></i>
      </button>

      <div *ngIf="isSearchActive" class="search-bar">
        <input
          type="text"
          placeholder="Search..."
          [value]="searchQuery"
          (input)="onSearchChange($event)" />
        <button class="search-icon-button">
          <i class="fa fa-chevron-up"></i>
        </button>
        <button class="search-icon-button">
          <i class="fa fa-chevron-down"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Chat Body -->
  <div class="messages">
    <div class="chat-container" #chatContainer>
      <button class="load-more-button">Load More</button>

      <div *ngFor="let chat of fetchedMessages">
        <div class="chat-date">{{ chat.date }}</div>
        <div *ngFor="let message of chat.messages">
          <div *ngIf="message.sender" class="message from-you">
            <div class="message-text">
              <div class="message-content">{{ message.content }}</div>
              <div class="message-time">{{ formatTime(message.time) }}</div>
            </div>
          </div>

          <div *ngIf="!message.sender" class="message from-other">
            <div class="message-text">
              <div class="message-content">{{ message.content }}</div>
              <div class="message-time">{{ formatTime(message.time) }}</div>
            </div>
          </div>
        </div>
      </div>
      <button class="load-more-button">Load More</button>
    </div>
  </div>

  <!-- Chat Footer -->
  <div class="chat-footer">
    <button class="icon-btn emoji-btn" aria-label="Emoji Picker">
      <i class="fas fa-smile"></i>
    </button>

    <input
      type="text"
      [value]="message"
      (input)="onInputChange($event)"
      (keydown)="onKeydown($event)"
      placeholder="Type a message"
      class="chat-input" />

    <button
      class="icon-btn send-btn"
      [disabled]="!message"
      aria-label="Send Message"
      (click)="sendMessage()">
      <i class="fas fa-paper-plane"></i>
    </button>

    <button class="icon-btn attachment-btn" aria-label="Attach File">
      <i class="fas fa-paperclip"></i>
    </button>

    <button class="icon-btn voice-btn" aria-label="Record Voice Message">
      <i class="fas fa-microphone"></i>
    </button>
  </div>
</div>
